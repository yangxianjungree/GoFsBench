# 使用 Go 自带文件IO操作性能测试

为了体现系统的瓶颈在于磁盘，需要保证足够的文件数和大小，将系统的cache写满。

## 1. 上传

- PAGE_SIZE = 4k

|文件大小(byte)/数据|请求数|50协程|100协程|500协程|1000协程|
|--|--|--|--|--|--|
|5K|2,000,000|qps:3058 time:653845|qps:3974 time:503158|qps:5912 time:338282|qps:4085 time:489587|
|50K|200,000|-|-|qps:881 time:226914|-|
|500K|20,000|-|-|qps:85 time:233628|-|
|1M|10,000|协程:20 qps:41 time:238854|qps:45 time:221450|qps:48 time:204659|协程:2500 qps:46 time:217310|
|5M|2,000|-|-|qps:12 time:164579|-|
|50M|200|-|-|qps:0.8 time:241598|-|

- PAGE_SIZE = 40k

|文件大小(byte)/数据|请求数|500协程|100协程|20协程|2500协程|
|--|--|--|--|--|--|
|5K|2,000,000|qps:4304 time:464638|
|50K|200,000|qps:783 time:255344|
|500K|20,000|qps:80 time:247030|
|1M|10,000|qps:50 time:197729|qps:48 time:206938|qps:62 time:160783|qps:40 time:250057|
|5M|2,000|qps:15 time:130722|
|50M|200|qps:1 time:187825|

- PAGE_SIZE = 400k

|文件大小(byte)/数据|请求数|500协程|100协程|20协程|2500协程|
|--|--|--|--|--|--|
|5K|2,000,000|qps:3710 time:538988|
|50K|200,000|qps:805 time:248280|
|500K|20,000|qps:109 time:182115|
|1M|10,000|qps:48 time:204591|qps:40 time:248363|qps:44 time:224613|qps:28 time:351511|
|5M|2,000|qps:13 time:148810|
|50M|200|qps:0.9 time:214528|

## 2. 查询

- 请求数200,000，500并发

|文件大小/数据|耗时ms|qps|
|--|--|--|
|50K|1973|101368|

## 3. 下载

- PAGE_SIZE = 4k，请求数200,000，500并发

|文件大小/数据|耗时ms|qps|创建系统线程数|
|--|--|--|--|
|50K|338012|591|513|

## 4. 删除

- 请求数200,000，500并发

|文件大小/数据|耗时ms|qps|创建系统线程数|
|--|--|--|--|
|50K|3306|60496|239|
